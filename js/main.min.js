$(function($) {
	"use strict";

	$(window).on('load', function() {
		menuFixed();
	});

	/// Navbar fixed ///
	function menuFixed() {
		$(window).scroll(function() {
			var winTop = $(window).scrollTop();
			var wWidth = $(window).width();
			if (winTop >= 110 & wWidth > 768) {
				$('body').addClass('sticky-header');
				$('.navbar').addClass('nav-fix');
			} else {
				$('body').removeClass('sticky-header');
				$('.navbar').removeClass('nav-fix');
			}
		});
	}

	$(document).on('scroll', function() {
		menuFixed();
	});

	/// Owl-carousel ///
	if ($("#full").length > 0) {
		$("#full").owlCarousel({
			loop: true,
			autoplay: true,
			autoplayTimeout: 15000,
			autoplayHoverPause: true,
			items: 1,
			dots: true,
			lazyFollow: false,
			animateOut: 'fadeOut',
			thumbs: true,
			thumbsPrerendered: true,
		});
	};

	if ($("#service-card").length > 0) {
		$("#service-card").owlCarousel({
			loop: true,
			margin: 12,
			dots: true,
			lazyFollow: false,
			stagePadding: 2,
			responsive: {
				0: {
					items: 2
				},
				768: {
					items: 3
				},
				992: {
					items: 4
				},
			},
		});
	};

	if ($("#news").length > 0) {
		$("#news").owlCarousel({
			loop: true,
			margin: 8,
			dots: true,
			lazyFollow: false,
			stagePadding: 2,
			responsive: {
				0: {
					items: 2
				},
				768: {
					items: 3
				},
				992: {
					items: 4
				},
			},
		});
	};

	if ($("#dayoff").length > 0) {
		$("#dayoff").owlCarousel({
			loop: true,
			margin: 16,
			dots: true,
			lazyFollow: false,
			stagePadding: 2,
			responsive: {
				0: {
					items: 2
				},
				768: {
					items: 3
				},
				992: {
					items: 4
				},
			},
		});
	};

	if ($("#Customer").length > 0) {
		$("#Customer").owlCarousel({
			autoplay: true,
			autoplayTimeout: 3000,
			autoplayHoverPause: true,
			loop: true,
			margin: 16,
			dots: true,
			responsive: {
				0: {
					items: 3
				},
				768: {
					items: 6
				},
			},
		});
	};

	/// Counter UP ///
	$(".counter").counterUp({
		delay: 10,
		time: 2000,

	});
    if (this.location.hash == "#back-1hr") $("#1hr-login--sm").prop("checked", true);
    if (this.location.hash == "#back-1hr") $("#tab2").prop("checked", true);
    if (this.location.hash == "#evaluation") $("#tab-1hr-2").prop("checked", true);
    if (this.location.hash == "#attendance") $("#tab-1hr-3").prop("checked", true);
	/// Wow 動畫調用 ///
	new WOW().init();

	/// 滾動兼容性 ///
	var u = navigator.userAgent;
	var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1;
	var isUc = u.indexOf('UCBrowser') > -1;
	var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
	if (isAndroid && isUc) {
		$('.slider-menu').on('touchstart', function() {
			$(document).on('touchmove', function(e) {
				e.preventDefault();
			});
			$(document).on('touchend', function() {
				$(document).unbind();
			});
		});
	}

	var oBox = $('.slider-menu');
	var oBoxWidth = $('.slider-menu').width();

	oBox.find('li').on('click', function() {
		var thisWidth = $(this).width();
		var moveLeft = this.offsetLeft;
		if (oBoxWidth < moveLeft + thisWidth) {
			oBox.animate({
				scrollLeft: moveLeft
			});
		} else {
			oBox.animate({
				scrollLeft: 0
			});
		}
	});

	/// chosen 示範智慧輸入框 ///
	if ($(".duty0Cht").length > 0)
		$(".duty0Cht").chosen({
			disable_search_threshold: 10,
			no_results_text: "沒有您搜索的條件！",
			search_contains: true,
			max_selected_options: 10,
		});

	if ($(".city0Cht").length > 0)
		$(".city0Cht").chosen({
			disable_search_threshold: 10,
			no_results_text: "沒有您搜索的條件！",
			search_contains: true,
			max_selected_options: 10,
		});

	/// 移動端水平滑動選單控制 Active 事件 ///
	if ($(".hidden-sm-up ul").length > 0)
		$(".hidden-sm-up ul").scrollLeft($(".slide-item.active").offset().left);

	///*** layer 彈窗調用 ***///
	layer.config({
  		extend: 'myskin/style.css'
	});
	/// iframe 聯絡我們 ///
	$('#ifcontact').on('click', function() {
		var index = parent.layer.getFrameIndex(window.name);
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['聯絡我們'],
			scrollbar: false,
			shadeClose: true,
			fixed: true,
			area: ['calc(50% + 10rem)','38rem'],
			content: 'if_contact.html'
		});
	});
	$('#icontact').on('click', function() {
		var index = parent.layer.getFrameIndex(window.name);
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['聯絡我們'],
			scrollbar: false,
			shadeClose: true,
			fixed: true,
			area: ['calc(50% + 10rem)','38rem'],
			content: 'https://recaptcha-demo.appspot.com/recaptcha-v2-checkbox.php'
		});
	});
	/// iframe 忘記密碼 ///
	$('#forget').on('click', function() {
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['重設密碼'],
			shadeClose: true,
			area: ['28rem', '383px'],
			content: 'if_forget.html'
		});
	});
	/// iframe 線上客服調用 ///
	$('#service').on('click', function() {
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['線上客服'],
			area: ['52rem', '35rem'],
			scrollbar: false,
			shadeClose: true,
			content: 'http://25.cami.yesing.com/tw/service/MTExMWpvYmJhbms'
		});
	});
	/// iframe 線上客服調用 Mobile ///
	$('#service_mobile').on('click', function() {
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['線上客服'],
			area: ['28rem', '80%'],
			scrollbar: false,
			shadeClose: true,
			content: 'http://25.cami.yesing.com/tw/service/MTExMWpvYmJhbms'
		});
	});
	/// iframe 職務類別選擇 ///
	$('#duty').on('click', function() {
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['職務類別選單'],
			scrollbar: false,
			shadeClose: true,
			area: ['28rem', '28rem'],
			content: 'if_area.html'
		});
	});
	/// iframe 地區選擇 ///
	$('#city').on('click', function() {
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['地區類別選單'],
			scrollbar: false,
			shadeClose: true,
			area: ['28rem', '28rem'],
			content: 'if_area.html'
		});
	});
	/// iframe 學歷選擇 ///
	$('#education').on('click', function() {
		var index = parent.layer.getFrameIndex(window.name);
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['學歷'],
			shadeClose: true,
			area: ['28rem', '375px'],
			content: 'if_education.html'
		});
	});
	/// iframe 年資選擇 ///
	$('#seniority').on('click', function() {
		var index = parent.layer.getFrameIndex(window.name);
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['年資'],
			shadeClose: true,
			area: ['28rem', '286px'],
			content: 'if_seniority.html'
		});
	});
	/// iframe 會員服務條款 ///
	$('#terms').on('click', function() {
		layer.open({
			skin: 'my-skin',
			type: 2,
			title: ['會員服務條款'],
			scrollbar: false,
			shadeClose: true,
			area: ['28rem', '28rem'],
			content: 'if_terns.html'
		});
	});
	/// 僅限Vip會員使用 引導 ///
	$('.justvip').on('click', function() {
		var index = parent.layer.getFrameIndex(window.name);
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['此功能僅限 VIP 會員使用'],
			shadeClose: true,
			area: ['28rem', '395px'],
			content: 'if_justvip.html'
		});
	});
	/// iframe PC-IP 查詢 Tip ///
	$('#IP').on('click', function() {
		layer.tips('<font style="color:#000">Web</font>:112<br>chkIP:False<br>IP:202.153.190.254<br>IPc:False,202.153.190.254<br>IP_Proxy:browser:Mozilla/5.0 (Windows NT 10.0; Win64; x64)<br>AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36<br>MAC browser:False', '#IP', {
			tips: [3, '#283340'],
			time: 5000
		});
	});
	/// Mobile IP ///
	$('#ip_mobile').on('click', function() {
		layer.msg('Web:112<br>chkIP:False<br>IP:202.153.190.254<br>IPc:False,202.153.190.254<br>IP_Proxy:browser:Mozilla/5.0 (Windows NT 10.0; Win64; x64)<br>AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36<br>MAC browser:False');
	});
	/// loading ///
	$('#loading').on('click', function() {
		var index = layer.load(2, {
			shade: [0.2, '#fff']
		});
	});
	/// Go Top ///
	$(window).scroll(function() {
		if ($(this).scrollTop()) {
			$('.back-to-top button').fadeIn();
		} else {
			$('.back-to-top button').fadeOut();
		}
	});
	$(".back-to-top button").on('click', function() {
		$("html, body").animate({
			scrollTop: 0
		}, 1000);
	});
	/// 產品服務上方TAG ///
	$(function() {
	    $('.crucial-tag a').click(function() {
	    $(this).addClass('active').siblings().removeClass('active');
	    });
	});
	/// 資料擷取 錯誤 ///
	$('#getorgan_wrong').on('click', function() {
		layer.msg('請輸入8碼半形數字', {
			time:0,
			btn:['我知道了']
		});
	});
	/// 資料擷取 正確 ///
	$('#getorgan').on('click', function() {
		layer.msg('擷取成功', {
			time:0,
			btn:['我知道了']
		});
	});
	/// 帳號檢查 錯誤 ///
	$('#getac_wrong').on('click', function() {
		layer.msg('帳號重複', {time:800});
	});
	/// 帳號檢查 正確 ///
	$('#getac').on('click', function() {
		layer.msg('帳號可使用', {time:500});
	});
	/// 行業類別表  ///
	$('#trade_list').on('click', function() {
		var index = parent.layer.getFrameIndex(window.name);
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['行業類別總表'],
			shadeClose: true,
			maxmin:true,
			area: ['80%', '80%'],
			content: 'https://www.1111.com.tw/09SP/st1/trade_list.asp'
		});
	});
	/// 職務類別表  ///
	$('#ct_list').on('click', function() {
		var index = parent.layer.getFrameIndex(window.name);
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['職務類別總表'],
			shadeClose: true,
			maxmin:true,
			area: ['80%', '80%'],
			content: 'https://www.1111.com.tw/09SP/st1/ct_listA.asp'
		});
	});
	/// 科系類別表  ///
	$('#mj_list').on('click', function() {
		var index = parent.layer.getFrameIndex(window.name);
		layer.open({
			skin: 'my-skin',
			type: 2,
			anim: 5,
			title: ['科系類別總表'],
			shadeClose: true,
			maxmin:true,
			area: ['80%', '80%'],
			content: 'http://www.1111.com.tw/09SP/st1/mj_list.asp'
		});
	});
 $(function(){
        //propertychange监听input里面的字符变化,属性改变事件
        $('body').on('input propertychange','#duty0Cht', function() {
            var $this = $(this);
            console.log($this);
            var text_length = $this.val().length;//获取当前文本框的长度
            var current_width = parseInt(text_length) *16;//该16是改变前的宽度除以当前字符串的长度,算出每个字符的长度
            console.log(current_width);
            $this.css("width",current_width+"px");
        });
    })

});
// localStorage.getItem(欄位名稱字串)  //取值
// localStorage.setItem(欄位名稱字串, 值);  //附值
// localStorage.clear()  //清除

